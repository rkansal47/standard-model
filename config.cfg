\Preamble{xhtml}
\catcode`\:=11
\Configure{equation}
  {\ifvmode \IgnorePar\fi\EndP
   \HCode{<table class="equation"><tr><td>}%
   \Configure{gather}
     {\HCode{<\a:mathml mtable\Hnewline
        \mml:class="equation"><\a:mathml mtr><\a:mathml mtd>}\IgnorePar
         \Configure{$$}
   {\Configure{@math}{%\a:mathml
 display="block"
%
                       \mml:class="equation"}\IgnorePar\EndP\DviMath}
   {\EndDviMath\EndP}
   {\DisplayMathtrue}%
}
     {\HCode{</\a:mathml mtd></\a:mathml mtr></\a:mathml mtable>}}
     {}
     {}
     {\ifnum\HCol=2 \IgnorePar
         \HCode{</\a:mathml mtd><\a:mathml mtd>}\fi }
     {}
%
   \Configure{$$}
   {\Configure{@math}{%\a:mathml
 display="block"
%
                       \mml:class="equation"}\IgnorePar\EndP\DviMath}
   {\EndDviMath\EndP}
   {\DisplayMathtrue}%
%
   \let\mathopen\eq:mathopen%

  }
  {\ifvmode \IgnorePar\fi\EndP
   \HCode{</td><td class="eq-no">}%
   }
  {\ifvmode \IgnorePar\fi\EndP \HCode{</td></tr></table>}%
   \par\ShowPar\noindent}
\catcode`\:=12
\begin{document}
\EndPreamble